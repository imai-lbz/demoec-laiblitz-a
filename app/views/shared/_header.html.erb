<header class="site-header">
  <div class="header-container">
    <div class="header-logo-section">
      <%= link_to image_tag('logo.svg', class: 'logo-icon'), root_path, class: 'logo-link' %>
    </div>

    <nav class="main-nav desktop-only">
      <% nav_items = [{'name': 'ホーム', 'href': root_path}, {'name': 'カテゴリー', 'href': "#"},{'name': '人気商品', 'href': "#"}] %>
      <% nav_items.each do |item| %>
        <%= link_to item[:name], item[:href], class: "nav-link #{controller_name == item[:href].gsub('/', '') ? 'active' : ''}" %>
      <% end %>
    </nav>

    <div class="header-actions desktop-only">
      <div class="search-container">
        <i class="fas fa-search"></i>
        <input type="search" placeholder="商品を検索..." class="search-input">
      </div>

      <div class="user-menu">
        <% if user_signed_in? %>
          <div class="user-dropdown">
            <%= link_to "#{current_user.nickname}さん", "#", class: 'user-nickname' %>
            <div class="dropdown-content">
              <%# 管理者ユーザー限定のプルダウンメニュー %>
              <% if current_user.admin? %>
                <%= link_to 'ユーザー管理', users_path, class: "user-admin" %>
                <%= link_to '商品管理', dashboard_items_path, class: "user-admin" %>
              <% end %>
              <%# 一般ユーザー限定のプルダウンメニュー %>
              <% if !current_user.admin? %>
                <%= link_to "マイページ", mypage_path, class: "logout" %>
              <% end %>
              <%# 共通のプルダウンメニュー %>
              <%= form_tag(destroy_user_session_path, method: :delete) do %>
                <%= button_tag 'ログアウト', class: "logout" %>
              <% end %>
            </div>
          </div>
        <% else %>
          <%= link_to 'ログイン', new_user_session_path, class: "login" %>
          <%= link_to '新規登録', new_user_registration_path, class: "sign-up" %>
        <% end %>
      </div>    
    </div>
  </div>

</header>
