<%= render "shared/header" %>

<div class="home-page">
  <section class="hero-section">
    <div class="hero-image-container">
      <div class="hero-overlay"></div>
      <div class="hero-content">
        <h1 class="hero-title"> あなたの生活を彩る、<br> 特別なアイテム</h1>
        <p class="hero-description">
          DemoECで、あなただけの特別な商品を見つけましょう。高品質な商品を手頃な価格で。
        </p>
      </div>
    </div>
  </section>

  <%# 商品一覧 %>
  <section class="featured-products-section">
    <div class="section-header">
      <h2 class="section-title">新着商品</h2>
      <%= link_to 'すべて見る', root_path, class: 'view-all-link' %>
    </div>
    <div class="display-flex-content">
      <div class="select-items">
        <div class="select-price">
          <div class="select-content">金額</div>
          <% form_with url: "#", method: :get, local: true, class: 'price-filter-form' do |form| %>
            <div class="select-dropdown">
              <%= form.label :min_price, "最小金額:" %>
              <%= form.number_field :min_price, value: params[:min_price], min: 0 %>
            </div>
            <div class="select-dropdown">
              <%= form.label :max_price, "最高金額:" %>
              <%= form.number_field :max_price, value: params[:max_price], min: 0 %>
            </div>
            <%= form.submit "検索", class: "visually-hidden-submit-button" %>
            <% end %>
        </div>
        <div class="select-condition">
          <div class="select-content">商品の状態</div>
          <div class="select-dropdown">
            <form action="#" method="get" id="filter-form">
              <%= select_tag :condition_id,
                            options_from_collection_for_select(Condition.all, :id, :name, params[:condition_id]),
                            { prompt: '---', class: 'select-box', id: 'item-condition-select' } %>
            </form>


            <%#= form_with url: "#",  local: true do |f| %>
              <%##= f.collection_select :condition_id, Condition.all, :id, :name, { prompt: '---' }, { class: 'select-box', id: 'item-category' } %>
              <%#= f.submit "検索", class: "visually-hidden-submit-button" %>
            <%# end %>



          </div>
        </div>
      </div>
      <div class="products-grid">
        <% if @items.any? %>
          <% @items.each do |item| %>
            <%= link_to  item_path(item), class: 'product-card' do %>
            <div class="product-image-container">
              <%= image_tag item.image, class: 'product-image' %>
              <%# 商品が売れていれば在庫なしを表示しましょう %>
              <% if item.sold_out? %>
                <div class="sold-out-badge">
                  <span>在庫なし</span>
                </div>
              <% end %>
            </div>
            <div class="product-content">
              <div class="product-category"><%= item.category.name  %></div>
              <h3 class="product-name"><%= item.name  %></h3>
            </div>
            <div class="product-footer">
              <div class="product-price">¥<%= item.price  %></div>
            </div>
            <% end %>
          <% end %>
        <% else%>
          <%# ダミー商品表示 %>
          <%= link_to '#', class: 'product-card' do %>
            <div class="product-image-container">
              <%= image_tag "placeholder.svg", class: "product-image" %>
            </div>
            <div class="product-content">
              <div class="product-category"></div>
              <h3 class="product-name">商品準備中</h3>
            </div>
            <div class="product-footer">
              <div class="product-price">¥<span>99999999</span></div>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </section>
  <%# /商品一覧 %>
</div>

<%= render "shared/footer" %>